---
title: 降频
categories: 
- DOM
---

# 降频

这里说的降频指的是，浏览器有些事件默认的触发频率有时候太高了，需要降下来
比如有onscroll,onmousemove事件，示例

```
//设置一个时间段，一个period能执行一次
function throttle(fn,period=1000){
  if(!this.timeEnd){
    fn();
    this.timeEnd=Date.now()+period;
  }
  if(this.timeEnd < Date.now() ){
    fn();
    this.timeEnd=Date.now()+period;//设置下一轮截止时间
  }else{
    return false;
  }
}
```
这种思路就是`函数节流（throttle）`，一个时间段只能执行一次函数

这是真正的降频

# debounce

还有一种变种，不再是降频了

如果一个弹簧被压着，只有在松手后才会弹起(执行)

意思是说，一个函数，在规定的时间后被触发

如果在这个期间内又要执行该函数，那么就重新设置`规定时间后触发`



# 例子

```
//压弹簧模式，只有在松手后才会弹起(执行)
function debounce(fn,atLeast=500){
  clearTimeout(this.timer);
  this.timer=setTimeout(fn,atLeast);
}

//设置一个时间段，一个period能执行一次
function throttle(fn,period=1000){
  if(!this.timeEnd || this.timeEnd < Date.now() ){
    fn();
    this.timeEnd=Date.now()+period;//设置下一轮截止时间
  }else{
    return false;
  }
}

function test(){
  console.log('test');
}
window.onscroll=function(){
  // debounce(test);
  throttle(test);
};


```


# links
- [http://www.cnblogs.com/fsjohnhuang/p/4147810.html](http://www.cnblogs.com/fsjohnhuang/p/4147810.html)

