---
title: 内存四区
categories: 
- C
---

- [内存分区](#内存分区)
- [执行程序](#执行程序)
- [四区](#四区)

# 内存分区

内存不是想用多少就用多少，想怎么用就怎么用

需要分开使用

比如操作系统单独使用一部分内存，其他程序不允许来操作这块内存，这样可以保证操作系统的安全

应用程序也如此，如果一个程序占用了所有内存，那么其他程序就无法运行

所以内存需要分区


# 执行程序

执行程序的时候，操作系统需要先确定该程序需要多少内存空间

```
size app.exe
```
可以查看，运行程序需要的空间

程序中，不同的部分放在不同的内存空间中，这样才可以实现C提供的功能

或者说，正是因为程序的不同的部分放到了不同的空间，才有了C提供的那些功能


# 四区

程序运行的时候，关系到四个区

- 栈区(stack)
- 堆区(heap)
- 代码区(text)
- 全局区/静态区()

## 栈区

操作系统会给每个进程(运行的程序)分配1M左右的栈空间

很小

这个空间，运行完成后就会被操作系统销毁的

分到这个空间的有

- 局部变量
- 函数参数


所以，函数中的局部变量，运行完成后就会被销毁



## 堆区

栈区一共就1M，对于大型程序根本无法使用

但是堆区是所有程序都可以使用的公共空间

这个空间很大，取决于机器剩余的内存

但是需要人工开辟，人工销毁

```
//人工创建
int *p=(int *)mallock(sizeof(int))
//人工销毁
free(p)
```

## 代码区

程序代码会放到代码区，程序运行完成后也会被销毁回收

## 全局区

全局区存放全局变量和静态变量的

这个区域不像栈区，函数运行完成后，局部变量就会被销毁

这个区域的变量，直到程序运行完成后再回被销毁


