---
title: MODEL
categories:
- NETWORK
---

- [BASE](#BASE)
- [协议](#协议)
- [分层](#分层)



# 分层

计算机网络涉及到的方面很多很复杂

人们提出了层层抽象的思想，和计算机层层抽象的思想一样

主要抽象成这几层

## 第一层

先将所有的物理设备抽象成一层，比如网卡，网线，路由器等等物理设备

一般叫做 `物理层`

这一层只关心物理层面的内容，比如网线规格，接线口规格

在这层基础之上再研究，就不用关心物理层面的问题了

## 第二层


在物理层之上，那么就可以发送信息了


### 如果一个网络中有10台计算机，如果可以做到这些计算机之间相互通信？

思路很简单，每台计算机，扯出十条线分别连接每台计算机就可以了

但是随着计算机的增加，线路也会增加，不实际

后来发明了`交换机`解决了这个问题

交换机的工作原理也很简单，自己维护一张mac表，里面记录着连接自己的计算机的mac地址

刚开始这个表是空的，交换机就通过广播的形式，来采集mac地址

a发送数据给b，交换机只需要查找d的mac地址，然后将数据通过b连接交换机的接口发出即可

一个网络中的所有计算机，连接到交换机，即可实现对所有计算机之间的连接


### 如果一个网络中有10台计算机,其中a给b怎么发送消息？

每台计算机上都有一个网卡，网卡有一个唯一的编号`mac地址`，全球网卡编号都唯一

a给b发送消息，思路也很简单，`广播`

a将消息发送给交换机，交换机会给这个网络中的每个计算机发送这条消息

发送的消息有发送者的mac地址和接受者的mac地址

每台计算机收到消息后，查看自己的mac地址，如果不是就直接忽略，如果是自己的，就接收

------------------------

至此，一个小型的网络就搭建起来了

这一层，一般叫做`数据链路层 `




# 第三层

但是还有一个问题，就是第二层的那个网络不能太大，因为每次通信都靠广播，多了的话，光判断是不是自己的消息了

所以，这个网络不能太大

这样就形成了一个一个的小网络

---------------

### 那么小网络之间怎么通信呢？

思路也简单，给每个网络一条统一的编号即可

### 小网络之间还能不能广播了?

不能了，如果继续广播，那么组成的那个网络还是没法变大，还是一个小网络而已

-----------

当时人们的目标是建立一个可以无限扩充的网络，所有的网络都连接在一起

为了实现这个目标，思路是这样的

- 1、所有的网络都有一个唯一的编号

- 2、这个网络中的节点a想要发送数据给节点b，不能直接发送，交给第三方发送

- 3、这个第三方使用自己的方式来发送数据

### 这个第三放怎么发送数据？

思路:

- 1、第三方(r表示)不能是一个，得是一群

- 2、比如r5的上家是r1,r2,下家是r6,r7,r5从上家接到数据，转发给下家就可以了

- 3、如此接力，一个一个传下去，就可以实现了只要通过这个第三方，那么就可以实现点对点的通信

这个第三方就是`internet`

#### r5收到数据，怎么知道给哪个下家?

r5维护了一张路由表，通过这张表可以得出给哪个下家

其实这是一个`路由寻址`的问题，很复杂

总的来说，就是维护一张路由表，这个表里面会记录最优的传递下家

并且这个表也是会定时更新的，逐渐优化传递下家


涉及到的协议也很多，这个问题是这层最主要解决的问题

这一层一般叫做 `网络层`

可以看到这层的主要目的就两个

- 确定网络节点
- 确定最优传输路径

著名的协议是`IP`协议，就是完成第一个目标

第二个目标(确定最优路径),设计到的协议很多，比如(RIP,ICMP等)


------------

还有一个问题，ip层里面是没有具体的计算机的，只有路由器和节点，而一个节点又是一个小网络

#### 发送的数据包里面只有目标ip地址，但是到了子网中传递数据只能使用mac地址传递,怎么传递到具体的计算机

思路也简单，在内网中广播指定ip对应的mac地址是多少，查到ip后就可以在子网中发送了,这个就是`ARP`协议的简单原理




## 第四层

照理说有了上面的三层，就够用了，已经实现了连接在网络上的计算机之间通信了

但是计算机还有进程，上面两层只是将信息发送给计算机，但是没有发送给具体进程

而这一层就是要解决这个问题

思路是再提供一层抽象，提供一些端口号对应不同的进程，就可以实现进程之间的通信了

这一层一般叫做 `传输层`

著名的协议是`TCP`,`UDP`两个协议(这一层的协议都得有端口号)


这两个协议的主要作用就是实现端口号之间的通信，TCP稳定可靠，但是速度慢，UDP不可靠，但是速度快

## 第五次

有了上面的4层，基本的使用是足够了

但是随着发展，需求变得更多了，比如发邮件，浏览远程计算机的文件，远程登录等等，这些需求极为常见


也有必要形成统一的规则，方便计算机和计算机收发邮件等

但是这仅仅是为了方便，因为上面三层已经将所有的基本功能都实现了，使用上面三层就可以满足需求

这一层一般叫做 `应用层`

协议很多，都是一个协议针对一个特定的应用领域，比如

POP3协议针对邮件发送

ftp协议针对文件传输

这一层最著名的就是`HTTP`，超文本传输协议，它是www的基础

----------------

ISO组织也做出了一个封层模型，分的更细致 ，这就是著名的  `OSI/七层模型`

- 物理层：底层数据传输，如网线；网卡标准。 
- 数据链路层：定义数据的基本格式，如何传输，如何标识；如网卡MAC地址。
- 网络层：定义IP编址，定义路由功能；如不同设备的数据转发。
- 传输层：端到端传输数据的基本功能；如 TCP、UDP。
- 会话层：控制应用程序之间会话能力；如不同软件数据分发给不同软件。
- 标识层：数据格式标识，基本压缩加密功能。
- 应用层：各种应用软件，包括 Web 应用。


按理说应该按照上面的分层逐层指定对应的协议，但是实际上，在实现上，使用四层的更简单，比如标示层，加密解密功能可以和其他层一起实现，简单说，按照它的模型研究可以，但是按照它的模型来实际去做，就会很麻烦








