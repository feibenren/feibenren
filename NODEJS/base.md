---
title: base
categories: 
- NODEJS
---
# node概述
nodejs起源于Ryan Dahl(瑞安.达尔,36岁)的一个项目，他想写一个web服务器，类似于Apache，nginx的东西，根据个人的经验，写出的服务器需要实现 **事件驱动**，**异步I/O**。

后来项目发展，超过了他当初的一个简单的web服务器的想法，变成了 **构建网络应用的基础框架**，这样就可以在这基础上构建出服务器，客户端，命令行工具等。

那么这个时候就得选择一种语言了，因为需要让其他人来写代码了，最终确定为JAVASCRIPT，

因为在浏览器端，js在事件驱动方面有着广泛的应用，程序员很熟悉这种写法

还有异步I/O，因为js没有在服务器端的应用，所以没有任何包袱，只要写出了一个异步I/O库，js直接调用这个库就可以实现需求了。这个异步I/O库就是libuv，通过这个库，可以异步调用文件，网络请求等等一切。

用了js，那么就得有一个js的解释器(因为这个‘基础框架’无法运行js代码的，所以就得用一个'库'使得js代码可以运行，)，作者用了chrome的v8引擎

这其实反而给js带来了一个利好消息，有人竟然使用我来开发应用了，之前我只能在浏览器端，现在干啥都可以了。

综上:**node是使用了js来开发‘基本框架’的一个工具**

# node特点
很明显，就是事件驱动，异步I/O，

但是js还有一个特点，就是单线程，node保留了这个特点，因为单线程简单

但是这也带来了一些问题，比如，一个线程死掉，那么这个服务器就完蛋了，还有就是无法充分利用多核cpu，但是这些都在node中有了对应的处理办法。

综上：
- 事件驱动
- 异步I/O
- 单线程



# 异步I/O运行机制
这里涉及到这几个角色，js，libuv，v8，node标准库

流程简单如下(读取本地文件为例)：
- v8解析js，解析到需要读取本地文件
- 调用node标准库(fs)
- 标准库(fs)通过libuv来操作异步I/O

# event loop


# 模块
由于在js中，是不存在模块概念的(es6出现了，但是node在es6出现之前就有了)，

然而只有通过模块化开发才能构建大型应用，作者采用了一个js社区中一个成熟的规范，就是 **commonjs**,这样node就可以实现了使用js模块化开发，

node中内置了基本的标准模块，也可以自己写模块


# node标准模块
这些模块采用c/c++开发，性能优异，比如：
- events
- fs
- http
等等


